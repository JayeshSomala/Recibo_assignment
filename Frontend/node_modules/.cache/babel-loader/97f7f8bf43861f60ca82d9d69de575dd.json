{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jayes\\\\OneDrive\\\\Desktop\\\\Recibo\\\\Assignment\\\\Frontend\\\\src\\\\users\\\\AddEdit.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\nimport { userService, alertService } from '../_services';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddEdit(_ref) {\n  _s();\n\n  var _errors$title, _errors$firstName, _errors$lastName, _errors$email, _errors$role, _errors$password, _errors$confirmPasswo;\n\n  let {\n    history,\n    match\n  } = _ref;\n  const {\n    id\n  } = match.params;\n  const isAddMode = !id; // form validation rules \n\n  const validationSchema = Yup.object().shape({\n    name: Yup.string().required('Name is required'),\n    manager: Yup.string().required('Reporting Manager name is required'),\n    Phone: Yup.number().required('Phone number is required')\n  }); // functions to build form returned by useForm() hook\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    errors,\n    formState\n  } = useForm({\n    resolver: yupResolver(validationSchema)\n  });\n\n  function onSubmit(data) {\n    return isAddMode ? createUser(data) : updateUser(id, data);\n  }\n\n  function createUser(data) {\n    return userService.create(data).then(() => {\n      alertService.success('User added', {\n        keepAfterRouteChange: true\n      });\n      history.push('.');\n    }).catch(alertService.error);\n  }\n\n  function updateUser(id, data) {\n    return userService.update(id, data).then(() => {\n      alertService.success('User updated', {\n        keepAfterRouteChange: true\n      });\n      history.push('..');\n    }).catch(alertService.error);\n  }\n\n  useEffect(() => {\n    if (!isAddMode) {\n      // get user and set form fields\n      userService.getById(id).then(user => {\n        const fields = ['title', 'firstName', 'lastName', 'email', 'role'];\n        fields.forEach(field => setValue(field, user[field]));\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    onReset: reset,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isAddMode ? 'Add User' : 'Edit User'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"title\",\n          ref: register,\n          className: `form-control ${errors.title ? 'is-invalid' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Mr\",\n            children: \"Mr\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Mrs\",\n            children: \"Mrs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Miss\",\n            children: \"Miss\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Ms\",\n            children: \"Ms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$title = errors.title) === null || _errors$title === void 0 ? void 0 : _errors$title.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"First Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"firstName\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.firstName ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$firstName = errors.firstName) === null || _errors$firstName === void 0 ? void 0 : _errors$firstName.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Last Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"lastName\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.lastName ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$lastName = errors.lastName) === null || _errors$lastName === void 0 ? void 0 : _errors$lastName.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-7\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.email ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Role\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"role\",\n          ref: register,\n          className: `form-control ${errors.role ? 'is-invalid' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"User\",\n            children: \"User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Admin\",\n            children: \"Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$role = errors.role) === null || _errors$role === void 0 ? void 0 : _errors$role.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), !isAddMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"pt-3\",\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Leave blank to keep the same password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          type: \"password\",\n          ref: register,\n          className: `form-control ${errors.password ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Confirm Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"confirmPassword\",\n          type: \"password\",\n          ref: register,\n          className: `form-control ${errors.confirmPassword ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$confirmPasswo = errors.confirmPassword) === null || _errors$confirmPasswo === void 0 ? void 0 : _errors$confirmPasswo.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: formState.isSubmitting,\n        className: \"btn btn-primary\",\n        children: [formState.isSubmitting && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"spinner-border spinner-border-sm mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 48\n        }, this), \"Save\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: isAddMode ? '.' : '..',\n        className: \"btn btn-link\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddEdit, \"6Pm8byjinSpjTcYCjRkkIqVR6r4=\", false, function () {\n  return [useForm];\n});\n\n_c = AddEdit;\nexport { AddEdit };\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEdit\");","map":{"version":3,"sources":["C:/Users/jayes/OneDrive/Desktop/Recibo/Assignment/Frontend/src/users/AddEdit.jsx"],"names":["React","useEffect","Link","useForm","yupResolver","Yup","userService","alertService","AddEdit","history","match","id","params","isAddMode","validationSchema","object","shape","name","string","required","manager","Phone","number","register","handleSubmit","reset","setValue","errors","formState","resolver","onSubmit","data","createUser","updateUser","create","then","success","keepAfterRouteChange","push","catch","error","update","getById","user","fields","forEach","field","title","message","firstName","lastName","email","role","password","confirmPassword","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\nimport { userService, alertService } from '../_services';\n\nfunction AddEdit({ history, match }) {\n    const { id } = match.params;\n    const isAddMode = !id;\n    \n    // form validation rules \n    const validationSchema = Yup.object().shape({\n        name: Yup.string()\n            .required('Name is required'),\n        manager: Yup.string()\n            .required('Reporting Manager name is required'),\n        Phone: Yup.number()\n            .required('Phone number is required'),\n    });\n\n    // functions to build form returned by useForm() hook\n    const { register, handleSubmit, reset, setValue, errors, formState } = useForm({\n        resolver: yupResolver(validationSchema)\n    });\n\n    function onSubmit(data) {\n        return isAddMode\n            ? createUser(data)\n            : updateUser(id, data);\n    }\n\n    function createUser(data) {\n        return userService.create(data)\n            .then(() => {\n                alertService.success('User added', { keepAfterRouteChange: true });\n                history.push('.');\n            })\n            .catch(alertService.error);\n    }\n\n    function updateUser(id, data) {\n        return userService.update(id, data)\n            .then(() => {\n                alertService.success('User updated', { keepAfterRouteChange: true });\n                history.push('..');\n            })\n            .catch(alertService.error);\n    }\n\n    useEffect(() => {\n        if (!isAddMode) {\n            // get user and set form fields\n            userService.getById(id).then(user => {\n                const fields = ['title', 'firstName', 'lastName', 'email', 'role'];\n                fields.forEach(field => setValue(field, user[field]));\n            });\n        }\n    }, []);\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} onReset={reset}>\n            <h1>{isAddMode ? 'Add User' : 'Edit User'}</h1>\n            <div className=\"form-row\">\n                <div className=\"form-group col\">\n                    <label>Title</label>\n                    <select name=\"title\" ref={register} className={`form-control ${errors.title ? 'is-invalid' : ''}`}>\n                        <option value=\"\"></option>\n                        <option value=\"Mr\">Mr</option>\n                        <option value=\"Mrs\">Mrs</option>\n                        <option value=\"Miss\">Miss</option>\n                        <option value=\"Ms\">Ms</option>\n                    </select>\n                    <div className=\"invalid-feedback\">{errors.title?.message}</div>\n                </div>\n                <div className=\"form-group col-5\">\n                    <label>First Name</label>\n                    <input name=\"firstName\" type=\"text\" ref={register} className={`form-control ${errors.firstName ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.firstName?.message}</div>\n                </div>\n                <div className=\"form-group col-5\">\n                    <label>Last Name</label>\n                    <input name=\"lastName\" type=\"text\" ref={register} className={`form-control ${errors.lastName ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.lastName?.message}</div>\n                </div>\n            </div>\n            <div className=\"form-row\">\n                <div className=\"form-group col-7\">\n                    <label>email</label>\n                    <input name=\"email\" type=\"text\" ref={register} className={`form-control ${errors.email ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.email?.message}</div>\n                </div>\n                <div className=\"form-group col\">\n                    <label>Role</label>\n                    <select name=\"role\" ref={register} className={`form-control ${errors.role ? 'is-invalid' : ''}`}>\n                        <option value=\"\"></option>\n                        <option value=\"User\">User</option>\n                        <option value=\"Admin\">Admin</option>\n                    </select>\n                    <div className=\"invalid-feedback\">{errors.role?.message}</div>\n                </div>\n            </div>\n            {!isAddMode &&\n                <div>\n                    <h3 className=\"pt-3\">Change Password</h3>\n                    <p>Leave blank to keep the same password</p>\n                </div>\n            }\n            <div className=\"form-row\">\n                <div className=\"form-group col\">\n                    <label>Password</label>\n                    <input name=\"password\" type=\"password\" ref={register} className={`form-control ${errors.password ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.password?.message}</div>\n                </div>\n                <div className=\"form-group col\">\n                    <label>Confirm Password</label>\n                    <input name=\"confirmPassword\" type=\"password\" ref={register} className={`form-control ${errors.confirmPassword ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.confirmPassword?.message}</div>\n                </div>\n            </div>\n            <div className=\"form-group\">\n                <button type=\"submit\" disabled={formState.isSubmitting} className=\"btn btn-primary\">\n                    {formState.isSubmitting && <span className=\"spinner-border spinner-border-sm mr-1\"></span>}\n                    Save\n                </button>\n                <Link to={isAddMode ? '.' : '..'} className=\"btn btn-link\">Cancel</Link>\n            </div>\n        </form>\n    );\n}\n\nexport { AddEdit };"]},"metadata":{},"sourceType":"module"}