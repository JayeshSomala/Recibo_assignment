{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jayes\\\\OneDrive\\\\Desktop\\\\Recibo\\\\Assignment\\\\Frontend\\\\src\\\\users\\\\AddEdit.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\nimport { userService, alertService } from '../_services';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddEdit(_ref) {\n  _s();\n\n  var _errors$name, _errors$phone, _errors$manager;\n\n  let {\n    history,\n    match\n  } = _ref;\n  const {\n    id\n  } = match.params;\n  const isAddMode = !id; // form validation rules \n\n  const validationSchema = Yup.object().shape({\n    name: Yup.string().required('Name is required'),\n    manager: Yup.string().required('Reporting Manager name is required'),\n    Phone: Yup.number().required('Phone number is required')\n  }); // functions to build form returned by useForm() hook\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    errors,\n    formState\n  } = useForm({\n    resolver: yupResolver(validationSchema)\n  });\n\n  function onSubmit(data) {\n    return isAddMode ? createUser(data) : updateUser(id, data);\n  }\n\n  function createUser(data) {\n    return userService.create(data).then(() => {\n      alertService.success('User added', {\n        keepAfterRouteChange: true\n      });\n      history.push('.');\n    }).catch(alertService.error);\n  }\n\n  function updateUser(id, data) {\n    return userService.update(id, data).then(() => {\n      alertService.success('User updated', {\n        keepAfterRouteChange: true\n      });\n      history.push('..');\n    }).catch(alertService.error);\n  }\n\n  useEffect(() => {\n    if (!isAddMode) {\n      // get user and set form fields\n      userService.getById(id).then(user => {\n        const fields = ['name', 'manager', 'phone'];\n        fields.forEach(field => setValue(field, user[field]));\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    onReset: reset,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isAddMode ? 'Add User' : 'Edit User'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.name ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$name = errors.name) === null || _errors$name === void 0 ? void 0 : _errors$name.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-7\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Phone Number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"phone\",\n          type: \"phone\",\n          ref: register,\n          className: `form-control ${errors.phone ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$phone = errors.phone) === null || _errors$phone === void 0 ? void 0 : _errors$phone.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-7\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Reporting Manager\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"manager\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.manager ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$manager = errors.manager) === null || _errors$manager === void 0 ? void 0 : _errors$manager.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: formState.isSubmitting,\n        className: \"btn btn-primary\",\n        children: [formState.isSubmitting && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"spinner-border spinner-border-sm mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 48\n        }, this), \"Save\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: isAddMode ? '.' : '..',\n        className: \"btn btn-link\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddEdit, \"6Pm8byjinSpjTcYCjRkkIqVR6r4=\", false, function () {\n  return [useForm];\n});\n\n_c = AddEdit;\nexport { AddEdit };\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEdit\");","map":{"version":3,"sources":["C:/Users/jayes/OneDrive/Desktop/Recibo/Assignment/Frontend/src/users/AddEdit.jsx"],"names":["React","useEffect","Link","useForm","yupResolver","Yup","userService","alertService","AddEdit","history","match","id","params","isAddMode","validationSchema","object","shape","name","string","required","manager","Phone","number","register","handleSubmit","reset","setValue","errors","formState","resolver","onSubmit","data","createUser","updateUser","create","then","success","keepAfterRouteChange","push","catch","error","update","getById","user","fields","forEach","field","message","phone","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\nimport { userService, alertService } from '../_services';\n\nfunction AddEdit({ history, match }) {\n    const { id } = match.params;\n    const isAddMode = !id;\n    \n    // form validation rules \n    const validationSchema = Yup.object().shape({\n        name: Yup.string()\n            .required('Name is required'),\n        manager: Yup.string()\n            .required('Reporting Manager name is required'),\n        Phone: Yup.number()\n            .required('Phone number is required'),\n    });\n\n    // functions to build form returned by useForm() hook\n    const { register, handleSubmit, reset, setValue, errors, formState } = useForm({\n        resolver: yupResolver(validationSchema)\n    });\n\n    function onSubmit(data) {\n        return isAddMode\n            ? createUser(data)\n            : updateUser(id, data);\n    }\n\n    function createUser(data) {\n        return userService.create(data)\n            .then(() => {\n                alertService.success('User added', { keepAfterRouteChange: true });\n                history.push('.');\n            })\n            .catch(alertService.error);\n    }\n\n    function updateUser(id, data) {\n        return userService.update(id, data)\n            .then(() => {\n                alertService.success('User updated', { keepAfterRouteChange: true });\n                history.push('..');\n            })\n            .catch(alertService.error);\n    }\n\n    useEffect(() => {\n        if (!isAddMode) {\n            // get user and set form fields\n            userService.getById(id).then(user => {\n                const fields = ['name', 'manager', 'phone',];\n                fields.forEach(field => setValue(field, user[field]));\n            });\n        }\n    }, []);\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} onReset={reset}>\n            <h1>{isAddMode ? 'Add User' : 'Edit User'}</h1>\n            <div className=\"form-row\">\n                <div className=\"form-group col-5\">\n                    <label>Name</label>\n                    <input name=\"name\" type=\"text\" ref={register} className={`form-control ${errors.name ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.name?.message}</div>\n                </div>\n            </div>\n            <div className=\"form-row\">\n                <div className=\"form-group col-7\">\n                    <label>Phone Number</label>\n                    <input name=\"phone\" type=\"phone\" ref={register} className={`form-control ${errors.phone ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.phone?.message}</div>\n                </div>\n            </div>\n            <div className=\"form-row\">\n                <div className=\"form-group col-7\">\n                    <label>Reporting Manager</label>\n                    <input name=\"manager\" type=\"text\" ref={register} className={`form-control ${errors.manager ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.manager?.message}</div>\n                </div>\n            </div>\n            <div className=\"form-group\">\n                <button type=\"submit\" disabled={formState.isSubmitting} className=\"btn btn-primary\">\n                    {formState.isSubmitting && <span className=\"spinner-border spinner-border-sm mr-1\"></span>}\n                    Save\n                </button>\n                <Link to={isAddMode ? '.' : '..'} className=\"btn btn-link\">Cancel</Link>\n            </div>\n        </form>\n    );\n}\n\nexport { AddEdit };"]},"metadata":{},"sourceType":"module"}