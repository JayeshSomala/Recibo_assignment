{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jayes\\\\OneDrive\\\\Desktop\\\\Recibo\\\\react-hook-form-crud-example\\\\src\\\\users\\\\AddEdit.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\nimport { userService, alertService } from '../_services';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddEdit(_ref) {\n  _s();\n\n  var _errors$title, _errors$firstName, _errors$lastName, _errors$email, _errors$role, _errors$password, _errors$confirmPasswo;\n\n  let {\n    history,\n    match\n  } = _ref;\n  const {\n    id\n  } = match.params;\n  const isAddMode = !id; // form validation rules \n\n  const validationSchema = Yup.object().shape({\n    title: Yup.string().required('Title is required'),\n    firstName: Yup.string().required('First Name is required'),\n    lastName: Yup.string().required('Last Name is required'),\n    email: Yup.string().email('email is invalid').required('email is required'),\n    role: Yup.string().required('Role is required'),\n    password: Yup.string().transform(x => x === '' ? undefined : x).concat(isAddMode ? Yup.string().required('Password is required') : null).min(6, 'Password must be at least 6 characters'),\n    confirmPassword: Yup.string().transform(x => x === '' ? undefined : x).when('password', (password, schema) => {\n      if (password || isAddMode) return schema.required('Confirm Password is required');\n    }).oneOf([Yup.ref('password')], 'Passwords must match')\n  }); // functions to build form returned by useForm() hook\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    errors,\n    formState\n  } = useForm({\n    resolver: yupResolver(validationSchema)\n  });\n\n  function onSubmit(data) {\n    return isAddMode ? createUser(data) : updateUser(id, data);\n  }\n\n  function createUser(data) {\n    return userService.create(data).then(() => {\n      alertService.success('User added', {\n        keepAfterRouteChange: true\n      });\n      history.push('.');\n    }).catch(alertService.error);\n  }\n\n  function updateUser(id, data) {\n    return userService.update(id, data).then(() => {\n      alertService.success('User updated', {\n        keepAfterRouteChange: true\n      });\n      history.push('..');\n    }).catch(alertService.error);\n  }\n\n  useEffect(() => {\n    if (!isAddMode) {\n      // get user and set form fields\n      userService.getById(id).then(user => {\n        const fields = ['title', 'firstName', 'lastName', 'email', 'role'];\n        fields.forEach(field => setValue(field, user[field]));\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    onReset: reset,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: isAddMode ? 'Add User' : 'Edit User'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"title\",\n          ref: register,\n          className: `form-control ${errors.title ? 'is-invalid' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Mr\",\n            children: \"Mr\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Mrs\",\n            children: \"Mrs\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Miss\",\n            children: \"Miss\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Ms\",\n            children: \"Ms\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$title = errors.title) === null || _errors$title === void 0 ? void 0 : _errors$title.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"First Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"firstName\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.firstName ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$firstName = errors.firstName) === null || _errors$firstName === void 0 ? void 0 : _errors$firstName.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Last Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"lastName\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.lastName ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$lastName = errors.lastName) === null || _errors$lastName === void 0 ? void 0 : _errors$lastName.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col-7\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          type: \"text\",\n          ref: register,\n          className: `form-control ${errors.email ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Role\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"role\",\n          ref: register,\n          className: `form-control ${errors.role ? 'is-invalid' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"User\",\n            children: \"User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Admin\",\n            children: \"Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$role = errors.role) === null || _errors$role === void 0 ? void 0 : _errors$role.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), !isAddMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"pt-3\",\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Leave blank to keep the same password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"password\",\n          type: \"password\",\n          ref: register,\n          className: `form-control ${errors.password ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group col\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Confirm Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"confirmPassword\",\n          type: \"password\",\n          ref: register,\n          className: `form-control ${errors.confirmPassword ? 'is-invalid' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"invalid-feedback\",\n          children: (_errors$confirmPasswo = errors.confirmPassword) === null || _errors$confirmPasswo === void 0 ? void 0 : _errors$confirmPasswo.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: formState.isSubmitting,\n        className: \"btn btn-primary\",\n        children: [formState.isSubmitting && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"spinner-border spinner-border-sm mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 48\n        }, this), \"Save\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: isAddMode ? '.' : '..',\n        className: \"btn btn-link\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddEdit, \"6Pm8byjinSpjTcYCjRkkIqVR6r4=\", false, function () {\n  return [useForm];\n});\n\n_c = AddEdit;\nexport { AddEdit };\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEdit\");","map":{"version":3,"sources":["C:/Users/jayes/OneDrive/Desktop/Recibo/react-hook-form-crud-example/src/users/AddEdit.jsx"],"names":["React","useEffect","Link","useForm","yupResolver","Yup","userService","alertService","AddEdit","history","match","id","params","isAddMode","validationSchema","object","shape","title","string","required","firstName","lastName","email","role","password","transform","x","undefined","concat","min","confirmPassword","when","schema","oneOf","ref","register","handleSubmit","reset","setValue","errors","formState","resolver","onSubmit","data","createUser","updateUser","create","then","success","keepAfterRouteChange","push","catch","error","update","getById","user","fields","forEach","field","message","isSubmitting"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as Yup from 'yup';\n\nimport { userService, alertService } from '../_services';\n\nfunction AddEdit({ history, match }) {\n    const { id } = match.params;\n    const isAddMode = !id;\n    \n    // form validation rules \n    const validationSchema = Yup.object().shape({\n        title: Yup.string()\n            .required('Title is required'),\n        firstName: Yup.string()\n            .required('First Name is required'),\n        lastName: Yup.string()\n            .required('Last Name is required'),\n        email: Yup.string()\n            .email('email is invalid')\n            .required('email is required'),\n        role: Yup.string()\n            .required('Role is required'),\n        password: Yup.string()\n            .transform(x => x === '' ? undefined : x)\n            .concat(isAddMode ? Yup.string().required('Password is required') : null)\n            .min(6, 'Password must be at least 6 characters'),\n        confirmPassword: Yup.string()\n            .transform(x => x === '' ? undefined : x)\n            .when('password', (password, schema) => {\n                if (password || isAddMode) return schema.required('Confirm Password is required');\n            })\n            .oneOf([Yup.ref('password')], 'Passwords must match')\n    });\n\n    // functions to build form returned by useForm() hook\n    const { register, handleSubmit, reset, setValue, errors, formState } = useForm({\n        resolver: yupResolver(validationSchema)\n    });\n\n    function onSubmit(data) {\n        return isAddMode\n            ? createUser(data)\n            : updateUser(id, data);\n    }\n\n    function createUser(data) {\n        return userService.create(data)\n            .then(() => {\n                alertService.success('User added', { keepAfterRouteChange: true });\n                history.push('.');\n            })\n            .catch(alertService.error);\n    }\n\n    function updateUser(id, data) {\n        return userService.update(id, data)\n            .then(() => {\n                alertService.success('User updated', { keepAfterRouteChange: true });\n                history.push('..');\n            })\n            .catch(alertService.error);\n    }\n\n    useEffect(() => {\n        if (!isAddMode) {\n            // get user and set form fields\n            userService.getById(id).then(user => {\n                const fields = ['title', 'firstName', 'lastName', 'email', 'role'];\n                fields.forEach(field => setValue(field, user[field]));\n            });\n        }\n    }, []);\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} onReset={reset}>\n            <h1>{isAddMode ? 'Add User' : 'Edit User'}</h1>\n            <div className=\"form-row\">\n                <div className=\"form-group col\">\n                    <label>Title</label>\n                    <select name=\"title\" ref={register} className={`form-control ${errors.title ? 'is-invalid' : ''}`}>\n                        <option value=\"\"></option>\n                        <option value=\"Mr\">Mr</option>\n                        <option value=\"Mrs\">Mrs</option>\n                        <option value=\"Miss\">Miss</option>\n                        <option value=\"Ms\">Ms</option>\n                    </select>\n                    <div className=\"invalid-feedback\">{errors.title?.message}</div>\n                </div>\n                <div className=\"form-group col-5\">\n                    <label>First Name</label>\n                    <input name=\"firstName\" type=\"text\" ref={register} className={`form-control ${errors.firstName ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.firstName?.message}</div>\n                </div>\n                <div className=\"form-group col-5\">\n                    <label>Last Name</label>\n                    <input name=\"lastName\" type=\"text\" ref={register} className={`form-control ${errors.lastName ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.lastName?.message}</div>\n                </div>\n            </div>\n            <div className=\"form-row\">\n                <div className=\"form-group col-7\">\n                    <label>email</label>\n                    <input name=\"email\" type=\"text\" ref={register} className={`form-control ${errors.email ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.email?.message}</div>\n                </div>\n                <div className=\"form-group col\">\n                    <label>Role</label>\n                    <select name=\"role\" ref={register} className={`form-control ${errors.role ? 'is-invalid' : ''}`}>\n                        <option value=\"\"></option>\n                        <option value=\"User\">User</option>\n                        <option value=\"Admin\">Admin</option>\n                    </select>\n                    <div className=\"invalid-feedback\">{errors.role?.message}</div>\n                </div>\n            </div>\n            {!isAddMode &&\n                <div>\n                    <h3 className=\"pt-3\">Change Password</h3>\n                    <p>Leave blank to keep the same password</p>\n                </div>\n            }\n            <div className=\"form-row\">\n                <div className=\"form-group col\">\n                    <label>Password</label>\n                    <input name=\"password\" type=\"password\" ref={register} className={`form-control ${errors.password ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.password?.message}</div>\n                </div>\n                <div className=\"form-group col\">\n                    <label>Confirm Password</label>\n                    <input name=\"confirmPassword\" type=\"password\" ref={register} className={`form-control ${errors.confirmPassword ? 'is-invalid' : ''}`} />\n                    <div className=\"invalid-feedback\">{errors.confirmPassword?.message}</div>\n                </div>\n            </div>\n            <div className=\"form-group\">\n                <button type=\"submit\" disabled={formState.isSubmitting} className=\"btn btn-primary\">\n                    {formState.isSubmitting && <span className=\"spinner-border spinner-border-sm mr-1\"></span>}\n                    Save\n                </button>\n                <Link to={isAddMode ? '.' : '..'} className=\"btn btn-link\">Cancel</Link>\n            </div>\n        </form>\n    );\n}\n\nexport { AddEdit };"]},"metadata":{},"sourceType":"module"}