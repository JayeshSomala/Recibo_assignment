{"ast":null,"code":"const config = require('config.json');\n\nconst mysql = require('mysql2/promise');\n\nconst {\n  Sequelize\n} = require('sequelize');\n\nmodule.exports = db = {};\ninitialize();\n\nasync function initialize() {\n  // create db if it doesn't already exist\n  const {\n    host,\n    port,\n    user,\n    password,\n    database\n  } = config.database;\n  const connection = await mysql.createConnection({\n    host,\n    port,\n    user,\n    password\n  });\n  await connection.query(`CREATE DATABASE IF NOT EXISTS \\`${database}\\`;`); // connect to db\n\n  const sequelize = new Sequelize(database, user, password, {\n    dialect: 'mysql'\n  }); // init models and add them to the exported db object\n\n  db.User = require('../users/user.model')(sequelize); // sync all models with database\n\n  await sequelize.sync({\n    alter: true\n  });\n}","map":{"version":3,"sources":["C:/Users/jayes/Downloads/react-hook-form-crud-example/src/_helpers/_helpers/db.js"],"names":["config","require","mysql","Sequelize","module","exports","db","initialize","host","port","user","password","database","connection","createConnection","query","sequelize","dialect","User","sync","alter"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,gBAAD,CAArB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAgBF,OAAO,CAAC,WAAD,CAA7B;;AAEAG,MAAM,CAACC,OAAP,GAAiBC,EAAE,GAAG,EAAtB;AAEAC,UAAU;;AAEV,eAAeA,UAAf,GAA4B;AACxB;AACA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,IAAR;AAAcC,IAAAA,IAAd;AAAoBC,IAAAA,QAApB;AAA8BC,IAAAA;AAA9B,MAA2CZ,MAAM,CAACY,QAAxD;AACA,QAAMC,UAAU,GAAG,MAAMX,KAAK,CAACY,gBAAN,CAAuB;AAAEN,IAAAA,IAAF;AAAQC,IAAAA,IAAR;AAAcC,IAAAA,IAAd;AAAoBC,IAAAA;AAApB,GAAvB,CAAzB;AACA,QAAME,UAAU,CAACE,KAAX,CAAkB,mCAAkCH,QAAS,KAA7D,CAAN,CAJwB,CAMxB;;AACA,QAAMI,SAAS,GAAG,IAAIb,SAAJ,CAAcS,QAAd,EAAwBF,IAAxB,EAA8BC,QAA9B,EAAwC;AAAEM,IAAAA,OAAO,EAAE;AAAX,GAAxC,CAAlB,CAPwB,CASxB;;AACAX,EAAAA,EAAE,CAACY,IAAH,GAAUjB,OAAO,CAAC,qBAAD,CAAP,CAA+Be,SAA/B,CAAV,CAVwB,CAYxB;;AACA,QAAMA,SAAS,CAACG,IAAV,CAAe;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAf,CAAN;AACH","sourcesContent":["const config = require('config.json');\r\nconst mysql = require('mysql2/promise');\r\nconst { Sequelize } = require('sequelize');\r\n\r\nmodule.exports = db = {};\r\n\r\ninitialize();\r\n\r\nasync function initialize() {\r\n    // create db if it doesn't already exist\r\n    const { host, port, user, password, database } = config.database;\r\n    const connection = await mysql.createConnection({ host, port, user, password });\r\n    await connection.query(`CREATE DATABASE IF NOT EXISTS \\`${database}\\`;`);\r\n\r\n    // connect to db\r\n    const sequelize = new Sequelize(database, user, password, { dialect: 'mysql' });\r\n\r\n    // init models and add them to the exported db object\r\n    db.User = require('../users/user.model')(sequelize);\r\n\r\n    // sync all models with database\r\n    await sequelize.sync({ alter: true });\r\n}"]},"metadata":{},"sourceType":"module"}